<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.vmms.dao.sys.RoleMenuOperationMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.vmms.model.RoleMenuOperation">
        <id column="RoleMenuOperationId" property="RoleMenuOperationId" />
        <result column="RoleId" property="RoleId" />
        <result column="MenuId" property="MenuId" />
        <result column="OperationId" property="OperationId" />
        <result column="Menu_OperationId" property="menuOperationid" />
        <result column="CreateUser" property="CreateUser" />
        <result column="CreateTime" property="CreateTime" />
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        RoleMenuOperationId, RoleId, MenuId, OperationId, Menu_OperationId, CreateUser, CreateTime
    </sql>
    <!-- 连接查询展示所有数据 -->
	<select id="selectRMOList" resultType="com.vmms.model.RoleMenuOperation">
		SELECT
		m1.RoleId as RoleId,m1.MenuId as MenuId,RoleMenuOperationId,m1.OperationId as OperationId,Menu_OperationId as menuOperationid,m2.OperationCode as OperationCode
		from t_role_menu_operation m1 left join t_Operation m2 on m1.OperationId=m2.OperationId
		WHERE 1=1
		<if test="roleId != null and roleId !=''">
			and m1.RoleId =#{roleId}
		</if>
		<if test="menuId != null and menuId !=''">
			and m1.MenuId=#{menuId}
		</if>
	</select>

</mapper>
